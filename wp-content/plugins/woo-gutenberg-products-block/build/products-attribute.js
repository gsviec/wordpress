!function(e,t){for(var r in t)e[r]=t[r]}(this,function(e){function t(t){for(var n,s,a=t[0],i=t[1],l=t[2],d=0,b=[];d<a.length;d++)s=a[d],o[s]&&b.push(o[s][0]),o[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(u&&u(t);b.length;)b.shift()();return c.push.apply(c,l||[]),r()}function r(){for(var e,t=0;t<c.length;t++){for(var r=c[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(c.splice(t--,1),e=s(s.s=r[0]))}return e}var n={},o={8:0},c=[];function s(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=n,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(r,n,function(t){return e[t]}.bind(null,n));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=i;return c.push([623,0]),r()}({0:function(e,t){!function(){e.exports=this.wp.element}()},15:function(e,t){!function(){e.exports=this.wp.apiFetch}()},16:function(e,t){!function(){e.exports=this.wp.compose}()},167:function(e,t,r){var n=r(168);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(28)(n,o);n.locals&&(e.exports=n.locals)},168:function(e,t,r){},17:function(e,t,r){"use strict";var n=r(0),o=r(4),c=function(){return Object(n.createElement)(o.Icon,{icon:Object(n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(n.createElement)("path",{fill:"#1E8CBE",d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}))})},s=function(){return Object(n.createElement)(o.Icon,{icon:Object(n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(n.createElement)("path",{fill:"#6C7781",d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}))})},a=function(){return Object(n.createElement)(o.Icon,{icon:Object(n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(n.createElement)("path",{d:"M0 0h24v24H0z",fill:"none"}),Object(n.createElement)("path",{d:"M23 12l-2.44-2.78.34-3.68-3.61-.82-1.89-3.18L12 3 8.6 1.54 6.71 4.72l-3.61.81.34 3.68L1 12l2.44 2.78-.34 3.69 3.61.82 1.89 3.18L12 21l3.4 1.46 1.89-3.18 3.61-.82-.34-3.68L23 12zm-10 5h-2v-2h2v2zm0-4h-2V7h2v6z"}))})},i=function(){return Object(n.createElement)(o.Icon,{icon:Object(n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(n.createElement)("path",{fill:"#1E8CBE",d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))})},l=function(){return Object(n.createElement)(o.Icon,{icon:Object(n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(n.createElement)("path",{fill:"#6C7781",d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}))})},u=function(){return Object(n.createElement)(o.Icon,{icon:Object(n.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},Object(n.createElement)("path",{d:"M13 13v8h8v-8h-8zM3 21h8v-8H3v8zM3 3v8h8V3H3zm13.66-1.31L11 7.34 16.66 13l5.66-5.66-5.66-5.65z"}),Object(n.createElement)("path",{d:"M0 0h24v24H0z",fill:"none"}))})};r.d(t,"a",function(){return c}),r.d(t,"b",function(){return s}),r.d(t,"c",function(){return a}),r.d(t,"d",function(){return i}),r.d(t,"e",function(){return l}),r.d(t,"f",function(){return u})},175:function(e,t,r){var n=r(176);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(28)(n,o);n.locals&&(e.exports=n.locals)},176:function(e,t,r){},177:function(e,t){!function(){e.exports=this.wp.data}()},179:function(e,t,r){"use strict";var n=r(0),o=r(2),c=r(4),s=r(1),a=r.n(s),i=function(e){var t=e.value,r=e.setAttributes;return Object(n.createElement)(c.SelectControl,{label:Object(o.__)("Order products by","woo-gutenberg-products-block"),value:t,options:[{label:Object(o.__)("Newness - newest first","woo-gutenberg-products-block"),value:"date"},{label:Object(o.__)("Price - low to high","woo-gutenberg-products-block"),value:"price_asc"},{label:Object(o.__)("Price - high to low","woo-gutenberg-products-block"),value:"price_desc"},{label:Object(o.__)("Rating - highest first","woo-gutenberg-products-block"),value:"rating"},{label:Object(o.__)("Sales - most first","woo-gutenberg-products-block"),value:"popularity"},{label:Object(o.__)("Title - alphabetical","woo-gutenberg-products-block"),value:"title"},{label:Object(o.__)("Menu Order","woo-gutenberg-products-block"),value:"menu_order"}],onChange:function(e){return r({orderby:e})}})};i.propTypes={setAttributes:a.a.func.isRequired,value:a.a.string.isRequired},t.a=i},185:function(e,t,r){var n={"./af":40,"./af.js":40,"./ar":41,"./ar-dz":42,"./ar-dz.js":42,"./ar-kw":43,"./ar-kw.js":43,"./ar-ly":44,"./ar-ly.js":44,"./ar-ma":45,"./ar-ma.js":45,"./ar-sa":46,"./ar-sa.js":46,"./ar-tn":47,"./ar-tn.js":47,"./ar.js":41,"./az":48,"./az.js":48,"./be":49,"./be.js":49,"./bg":50,"./bg.js":50,"./bm":51,"./bm.js":51,"./bn":52,"./bn.js":52,"./bo":53,"./bo.js":53,"./br":54,"./br.js":54,"./bs":55,"./bs.js":55,"./ca":56,"./ca.js":56,"./cs":57,"./cs.js":57,"./cv":58,"./cv.js":58,"./cy":59,"./cy.js":59,"./da":60,"./da.js":60,"./de":61,"./de-at":62,"./de-at.js":62,"./de-ch":63,"./de-ch.js":63,"./de.js":61,"./dv":64,"./dv.js":64,"./el":65,"./el.js":65,"./en-au":66,"./en-au.js":66,"./en-ca":67,"./en-ca.js":67,"./en-gb":68,"./en-gb.js":68,"./en-ie":69,"./en-ie.js":69,"./en-il":70,"./en-il.js":70,"./en-nz":71,"./en-nz.js":71,"./eo":72,"./eo.js":72,"./es":73,"./es-do":74,"./es-do.js":74,"./es-us":75,"./es-us.js":75,"./es.js":73,"./et":76,"./et.js":76,"./eu":77,"./eu.js":77,"./fa":78,"./fa.js":78,"./fi":79,"./fi.js":79,"./fo":80,"./fo.js":80,"./fr":81,"./fr-ca":82,"./fr-ca.js":82,"./fr-ch":83,"./fr-ch.js":83,"./fr.js":81,"./fy":84,"./fy.js":84,"./gd":85,"./gd.js":85,"./gl":86,"./gl.js":86,"./gom-latn":87,"./gom-latn.js":87,"./gu":88,"./gu.js":88,"./he":89,"./he.js":89,"./hi":90,"./hi.js":90,"./hr":91,"./hr.js":91,"./hu":92,"./hu.js":92,"./hy-am":93,"./hy-am.js":93,"./id":94,"./id.js":94,"./is":95,"./is.js":95,"./it":96,"./it.js":96,"./ja":97,"./ja.js":97,"./jv":98,"./jv.js":98,"./ka":99,"./ka.js":99,"./kk":100,"./kk.js":100,"./km":101,"./km.js":101,"./kn":102,"./kn.js":102,"./ko":103,"./ko.js":103,"./ky":104,"./ky.js":104,"./lb":105,"./lb.js":105,"./lo":106,"./lo.js":106,"./lt":107,"./lt.js":107,"./lv":108,"./lv.js":108,"./me":109,"./me.js":109,"./mi":110,"./mi.js":110,"./mk":111,"./mk.js":111,"./ml":112,"./ml.js":112,"./mn":113,"./mn.js":113,"./mr":114,"./mr.js":114,"./ms":115,"./ms-my":116,"./ms-my.js":116,"./ms.js":115,"./mt":117,"./mt.js":117,"./my":118,"./my.js":118,"./nb":119,"./nb.js":119,"./ne":120,"./ne.js":120,"./nl":121,"./nl-be":122,"./nl-be.js":122,"./nl.js":121,"./nn":123,"./nn.js":123,"./pa-in":124,"./pa-in.js":124,"./pl":125,"./pl.js":125,"./pt":126,"./pt-br":127,"./pt-br.js":127,"./pt.js":126,"./ro":128,"./ro.js":128,"./ru":129,"./ru.js":129,"./sd":130,"./sd.js":130,"./se":131,"./se.js":131,"./si":132,"./si.js":132,"./sk":133,"./sk.js":133,"./sl":134,"./sl.js":134,"./sq":135,"./sq.js":135,"./sr":136,"./sr-cyrl":137,"./sr-cyrl.js":137,"./sr.js":136,"./ss":138,"./ss.js":138,"./sv":139,"./sv.js":139,"./sw":140,"./sw.js":140,"./ta":141,"./ta.js":141,"./te":142,"./te.js":142,"./tet":143,"./tet.js":143,"./tg":144,"./tg.js":144,"./th":145,"./th.js":145,"./tl-ph":146,"./tl-ph.js":146,"./tlh":147,"./tlh.js":147,"./tr":148,"./tr.js":148,"./tzl":149,"./tzl.js":149,"./tzm":150,"./tzm-latn":151,"./tzm-latn.js":151,"./tzm.js":150,"./ug-cn":152,"./ug-cn.js":152,"./uk":153,"./uk.js":153,"./ur":154,"./ur.js":154,"./uz":155,"./uz-latn":156,"./uz-latn.js":156,"./uz.js":155,"./vi":157,"./vi.js":157,"./x-pseudo":158,"./x-pseudo.js":158,"./yo":159,"./yo.js":159,"./zh-cn":160,"./zh-cn.js":160,"./zh-hk":161,"./zh-hk.js":161,"./zh-tw":162,"./zh-tw.js":162};function o(e){var t=c(e);return r(t)}function c(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=c,e.exports=o,o.id=185},188:function(e,t){},189:function(e,t){},191:function(e,t){},192:function(e,t){},2:function(e,t){!function(){e.exports=this.wp.i18n}()},21:function(e,t){!function(){e.exports=this.wp.url}()},23:function(e,t,r){"use strict";var n=r(26),o=r.n(n),c=r(164),s=r.n(c),a=r(0),i=r(3),l=r(4),u=r(1),d=r.n(u),b=r(17);function p(e,t){if(!t)return e;var r=new RegExp(Object(i.escapeRegExp)(t),"ig");return e.replace(r,"<strong>$&</strong>")}var m=function(e){var t=e.className,r=e.depth,n=void 0===r?0:r,c=e.item,u=e.isSelected,d=e.isSingle,m=e.onSelect,h=e.search,g=void 0===h?"":h,j=e.showCount,f=void 0!==j&&j,_=s()(e,["className","depth","item","isSelected","isSingle","onSelect","search","showCount"]),v=[t,"woocommerce-search-list__item"];v.push("depth-".concat(n)),d&&v.push("is-radio-button");var w,O=c.breadcrumbs&&c.breadcrumbs.length;return Object(a.createElement)(l.MenuItem,o()({role:d?"menuitemradio":"menuitemcheckbox",className:v.join(" "),onClick:m(c),isSelected:u},_),Object(a.createElement)("span",{className:"woocommerce-search-list__item-state"},function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?Object(a.createElement)(b.d,null):Object(a.createElement)(b.e,null):t?Object(a.createElement)(b.a,null):Object(a.createElement)(b.b,null)}(d,u)),Object(a.createElement)("span",{className:"woocommerce-search-list__item-label"},O?Object(a.createElement)("span",{className:"woocommerce-search-list__item-prefix"},1===(w=c.breadcrumbs).length?Object(i.first)(w):2===w.length?Object(i.first)(w)+" › "+Object(i.last)(w):Object(i.first)(w)+" … "+Object(i.last)(w)):null,Object(a.createElement)("span",{className:"woocommerce-search-list__item-name",dangerouslySetInnerHTML:{__html:p(c.name,g)}})),!!f&&Object(a.createElement)("span",{className:"woocommerce-search-list__item-count"},c.count))};m.propTypes={className:d.a.string,depth:d.a.number,item:d.a.object,isSelected:d.a.bool,isSingle:d.a.bool,onSelect:d.a.func,search:d.a.string,showCount:d.a.bool},t.a=m},24:function(e,t){!function(){e.exports=this.wp.editor}()},29:function(e,t){!function(){e.exports=this.wp.blocks}()},3:function(e,t){!function(){e.exports=this.lodash}()},30:function(e,t,r){"use strict";var n=r(13),o=r.n(n),c=r(14),s=r.n(c),a=r(8),i=r.n(a),l=r(9),u=r.n(l),d=r(10),b=r.n(d),p=r(11),m=r.n(p),h=r(12),g=r.n(h),j=r(5),f=r.n(j),_=r(0),v=r(2),w=r(4),O=r(16),y=r(3),k=r(18),E=r.n(k),S=r(1),C=r.n(S),x=r(165);r(167);function N(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=Object(y.groupBy)(e,"parent"),n=Object(y.keyBy)(t,"id"),c=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!t.parent)return t.name?[t.name]:[];var r=e(n[t.parent]);return[].concat(s()(r),[t.name])},a=function e(t){return t.map(function(t){var s=r[t.id];return delete r[t.id],o()({},t,{breadcrumbs:c(n[t.parent]),children:s&&s.length?e(s):[]})})},i=a(r[0]||[]);return delete r[0],Object(y.forEach)(r,function(e){i.push.apply(i,s()(a(e||[])))}),i}var z=r(23),I={clear:Object(v.__)("Clear all selected items","woo-gutenberg-products-block"),list:Object(v.__)("Results","woo-gutenberg-products-block"),noItems:Object(v.__)("No items found.","woo-gutenberg-products-block"),noResults:Object(v.__)("No results for %s","woo-gutenberg-products-block"),search:Object(v.__)("Search for items","woo-gutenberg-products-block"),selected:function(e){return Object(v.sprintf)(Object(v._n)("%d item selected","%d items selected",e,"woo-gutenberg-products-block"),e)},updated:Object(v.__)("Search results updated.","woo-gutenberg-products-block")},L=function(e){function t(){var e;return i()(this,t),(e=b()(this,m()(t).apply(this,arguments))).onSelect=e.onSelect.bind(f()(f()(e))),e.onRemove=e.onRemove.bind(f()(f()(e))),e.onClear=e.onClear.bind(f()(f()(e))),e.isSelected=e.isSelected.bind(f()(f()(e))),e.defaultRenderItem=e.defaultRenderItem.bind(f()(f()(e))),e.renderList=e.renderList.bind(f()(f()(e))),e}return g()(t,e),u()(t,[{key:"onRemove",value:function(e){var t=this.props,r=t.isSingle,n=t.onChange,o=t.selected;return function(){r&&n([]);var t=Object(y.findIndex)(o,{id:e});n([].concat(s()(o.slice(0,t)),s()(o.slice(t+1))))}}},{key:"onSelect",value:function(e){var t=this,r=this.props,n=r.isSingle,o=r.onChange,c=r.selected;return function(){t.isSelected(e)?t.onRemove(e.id)():o(n?[e]:[].concat(s()(c),[e]))}}},{key:"onClear",value:function(){this.props.onChange([])}},{key:"isSelected",value:function(e){return-1!==Object(y.findIndex)(this.props.selected,{id:e.id})}},{key:"getFilteredList",value:function(e,t){var r=this.props.isHierarchical;if(!t)return r?N(e):e;var n=o()({},I,this.props.messages),c=new RegExp(Object(y.escapeRegExp)(t),"i");this.props.debouncedSpeak(n.updated);var s=e.map(function(e){return!!c.test(e.name)&&e}).filter(Boolean);return r?N(s,e):s}},{key:"defaultRenderItem",value:function(e){return Object(_.createElement)(z.a,e)}},{key:"renderList",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.props,o=n.isSingle,c=n.search,s=this.props.renderItem||this.defaultRenderItem;return e?e.map(function(e){return Object(_.createElement)(_.Fragment,{key:e.id},s({item:e,isSelected:t.isSelected(e),onSelect:t.onSelect,isSingle:o,search:c,depth:r}),t.renderList(e.children,r+1))}):null}},{key:"renderListSection",value:function(){var e=this.props,t=e.isLoading,r=e.search,n=this.getFilteredList(this.props.list,r),c=o()({},I,this.props.messages);return t?Object(_.createElement)("div",{className:"woocommerce-search-list__list is-loading"},Object(_.createElement)(w.Spinner,null)):n.length?Object(_.createElement)(w.MenuGroup,{label:c.list,className:"woocommerce-search-list__list"},this.renderList(n)):Object(_.createElement)("div",{className:"woocommerce-search-list__list is-not-found"},Object(_.createElement)("span",{className:"woocommerce-search-list__not-found-icon"},Object(_.createElement)(E.a,{icon:"notice-outline",role:"img","aria-hidden":"true",focusable:"false"})),Object(_.createElement)("span",{className:"woocommerce-search-list__not-found-text"},r?Object(v.sprintf)(c.noResults,r):c.noItems))}},{key:"renderSelectedSection",value:function(){var e=this,t=this.props,r=t.isLoading,n=t.isSingle,c=t.selected,s=o()({},I,this.props.messages);if(r||n||!c)return null;var a=c.length;return Object(_.createElement)("div",{className:"woocommerce-search-list__selected"},Object(_.createElement)("div",{className:"woocommerce-search-list__selected-header"},Object(_.createElement)("strong",null,s.selected(a)),a>0?Object(_.createElement)(w.Button,{isLink:!0,isDestructive:!0,onClick:this.onClear,"aria-label":s.clear},Object(v.__)("Clear all","woo-gutenberg-products-block")):null),c.map(function(t,r){return Object(_.createElement)(x.a,{key:r,label:t.name,id:t.id,remove:e.onRemove})}))}},{key:"render",value:function(){var e=this.props,t=e.className,r=void 0===t?"":t,n=e.search,c=e.setState,s=o()({},I,this.props.messages);return Object(_.createElement)("div",{className:"woocommerce-search-list ".concat(r)},this.renderSelectedSection(),Object(_.createElement)("div",{className:"woocommerce-search-list__search"},Object(_.createElement)(w.TextControl,{label:s.search,type:"search",value:n,onChange:function(e){return c({search:e})}})),this.renderListSection())}}]),t}(_.Component);L.propTypes={className:C.a.string,isHierarchical:C.a.bool,isLoading:C.a.bool,isSingle:C.a.bool,list:C.a.arrayOf(C.a.shape({id:C.a.number,name:C.a.string})),messages:C.a.shape({clear:C.a.string,list:C.a.string,noItems:C.a.string,noResults:C.a.string,search:C.a.string,selected:C.a.func,updated:C.a.string}),onChange:C.a.func.isRequired,renderItem:C.a.func,selected:C.a.array.isRequired,search:C.a.string,setState:C.a.func,debouncedSpeak:C.a.func,instanceId:C.a.number};t.a=Object(O.compose)([Object(O.withState)({search:""}),w.withSpokenMessages,O.withInstanceId])(L)},33:function(e,t,r){"use strict";function n(e,t){var r=e.attributes,n=e.attrOperator,o=e.categories,c=e.catOperator,s=e.orderby,a=e.products,i=e.columns||wc_product_block_data.default_columns,l={status:"publish",per_page:(e.rows||wc_product_block_data.default_rows)*i};switch(o&&o.length&&(l.category=o.join(","),c&&"all"===c&&(l.cat_operator="AND")),s&&("price_desc"===s?(l.orderby="price",l.order="desc"):"price_asc"===s?(l.orderby="price",l.order="asc"):"title"===s?(l.orderby="title",l.order="asc"):"menu_order"===s?(l.orderby="menu_order",l.order="asc"):l.orderby=s),r&&r.length>0&&(l.attribute_term=r.map(function(e){return e.id}).join(","),l.attribute=r[0].attr_slug,n&&(l.attr_operator="all"===n?"AND":"IN")),t){case"woocommerce/product-best-sellers":l.orderby="popularity";break;case"woocommerce/product-top-rated":l.orderby="rating";break;case"woocommerce/product-on-sale":l.on_sale=1;break;case"woocommerce/product-new":l.orderby="date";break;case"woocommerce/handpicked-products":l.include=a,l.per_page=a.length}return l}r.d(t,"a",function(){return n})},34:function(e,t,r){"use strict";var n=r(0),o=r(2),c=r(1),s=r.n(c),a=(r(175),function(e){var t=e.product,r=wc_product_block_data.placeholderImgSrc,c=null;return c=t.images.length?Object(n.createElement)("img",{src:t.images[0].src,alt:""}):Object(n.createElement)("img",{src:r,alt:""}),Object(n.createElement)("div",{className:"wc-product-preview"},c,Object(n.createElement)("div",{className:"wc-product-preview__title"},t.name),Object(n.createElement)("div",{className:"wc-product-preview__price",dangerouslySetInnerHTML:{__html:t.price_html}}),Object(n.createElement)("span",{className:"wp-block-button"},Object(n.createElement)("span",{className:"wc-product-preview__add-to-cart wp-block-button__link"},Object(o.__)("Add to cart","woo-gutenberg-products-block"))))});a.propTypes={product:s.a.shape({id:s.a.number,images:s.a.array,name:s.a.string,price_html:s.a.string}).isRequired},t.a=a},35:function(e,t,r){"use strict";r.d(t,"a",function(){return c});var n=r(163),o=r.n(n);function c(e,t){var r=e.attributes,n=r.attributes,c=r.attrOperator,s=r.categories,a=r.catOperator,i=r.orderby,l=r.products,u=r.columns||wc_product_block_data.default_columns,d=r.rows||wc_product_block_data.default_rows,b=new Map;switch(b.set("limit",d*u),b.set("columns",u),s&&s.length&&(b.set("category",s.join(",")),a&&"all"===a&&b.set("cat_operator","AND")),n&&n.length&&(b.set("terms",n.map(function(e){return e.id}).join(",")),b.set("attribute",n[0].attr_slug),c&&"all"===c&&b.set("terms_operator","AND")),i&&("price_desc"===i?(b.set("orderby","price"),b.set("order","DESC")):"price_asc"===i?(b.set("orderby","price"),b.set("order","ASC")):"date"===i?(b.set("orderby","date"),b.set("order","DESC")):b.set("orderby",i)),t){case"woocommerce/product-best-sellers":b.set("best_selling","1");break;case"woocommerce/product-top-rated":b.set("orderby","rating");break;case"woocommerce/product-on-sale":b.set("on_sale","1");break;case"woocommerce/product-new":b.set("orderby","date"),b.set("order","DESC");break;case"woocommerce/handpicked-products":if(!l.length)return"";b.set("ids",l.join(",")),b.set("limit",l.length);break;case"woocommerce/product-category":if(!s||!s.length)return"";break;case"woocommerce/products-by-attribute":if(!n||!n.length)return""}var p="[products",m=!0,h=!1,g=void 0;try{for(var j,f=b[Symbol.iterator]();!(m=(j=f.next()).done);m=!0){var _=o()(j.value,2);p+=" "+_[0]+'="'+_[1]+'"'}}catch(e){h=!0,g=e}finally{try{m||null==f.return||f.return()}finally{if(h)throw g}}return p+="]"}},39:function(e,t,r){"use strict";var n=r(0),o=r(2),c=r(3),s=r(1),a=r.n(s),i=r(4),l=function(e){var t=e.columns,r=e.rows,s=e.setAttributes;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(i.RangeControl,{label:Object(o.__)("Columns","woo-gutenberg-products-block"),value:t,onChange:function(e){var t=Object(c.clamp)(e,wc_product_block_data.min_columns,wc_product_block_data.max_columns);s({columns:Object(c.isNaN)(t)?"":t})},min:wc_product_block_data.min_columns,max:wc_product_block_data.max_columns}),Object(n.createElement)(i.RangeControl,{label:Object(o.__)("Rows","woo-gutenberg-products-block"),value:r,onChange:function(e){var t=Object(c.clamp)(e,wc_product_block_data.min_rows,wc_product_block_data.max_rows);s({rows:Object(c.isNaN)(t)?"":t})},min:wc_product_block_data.min_rows,max:wc_product_block_data.max_rows}))};l.propTypes={columns:a.a.oneOfType([a.a.number,a.a.string]).isRequired,rows:a.a.oneOfType([a.a.number,a.a.string]).isRequired,setAttributes:a.a.func.isRequired},t.a=l},4:function(e,t){!function(){e.exports=this.wp.components}()},612:function(e,t,r){var n=r(613);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(28)(n,o);n.locals&&(e.exports=n.locals)},613:function(e,t,r){},614:function(e,t,r){var n=r(615);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r(28)(n,o);n.locals&&(e.exports=n.locals)},615:function(e,t,r){},623:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r(2),c=r(18),s=r.n(c),a=r(29),i=(r(612),r(8)),l=r.n(i),u=r(9),d=r.n(u),b=r(10),p=r.n(b),m=r(11),h=r.n(m),g=r(12),j=r.n(g),f=r(5),_=r.n(f),v=r(21),w=r(15),O=r.n(w),y=r(24),k=r(4),E=r(3),S=r(1),C=r.n(S),x=r(33),N=r(39),z=r(14),I=r.n(z),L=r(26),R=r.n(L),A=r(273),M=r.n(A),P=r(13),T=r.n(P),B=(r(614),r(30)),D=r(23),q=function(e){function t(){var e;return l()(this,t),(e=p()(this,h()(t).apply(this,arguments))).state={list:[],loading:!0,attribute:0,termsList:{},termsLoading:!0},e.debouncedGetTerms=Object(E.debounce)(e.getTerms.bind(_()(_()(e))),200),e.renderItem=e.renderItem.bind(_()(_()(e))),e.onSelectAttribute=e.onSelectAttribute.bind(_()(_()(e))),e}return j()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.selected;O()({path:Object(v.addQueryArgs)("/wc-pb/v3/products/attributes",{per_page:-1})}).then(function(r){r=r.map(function(e){return T()({},e,{parent:0})}),e.setState(function(e){var n=e.attribute;if(!n&&t.length>0){var o=Object(E.find)(r,{slug:t[0].attr_slug});n=o?o.id:0}return{list:r,attribute:n,loading:!1}})}).catch(function(){e.setState({list:[],loading:!1})})}},{key:"componentDidUpdate",value:function(e,t){t.attribute!==this.state.attribute&&this.debouncedGetTerms()}},{key:"getTerms",value:function(){var e=this,t=this.state,r=t.attribute,n=t.termsList;r&&(n[r]||this.setState({termsLoading:!0}),O()({path:Object(v.addQueryArgs)("/wc-pb/v3/products/attributes/".concat(r,"/terms"),{per_page:-1})}).then(function(t){t=t.map(function(e){return T()({},e,{parent:r})}),e.setState(function(e){return{termsList:T()({},e.termsList,M()({},r,t)),termsLoading:!1}})}).catch(function(){e.setState({termsLoading:!1})}))}},{key:"onSelectAttribute",value:function(e){var t=this;return function(){t.props.onChange([]),t.setState({attribute:e.id===t.state.attribute?0:e.id})}}},{key:"renderItem",value:function(e){var t=e.item,r=e.search,c=e.depth,s=void 0===c?0:c,a=this.state,i=a.attribute,l=a.termsLoading,u=["woocommerce-product-attributes__item","woocommerce-search-list__item"];return r.length&&u.push("is-searching"),0===s&&0!==t.parent&&u.push("is-skip-level"),t.breadcrumbs.length?Object(n.createElement)(D.a,R()({className:u.join(" ")},e,{showCount:!0,"aria-label":"".concat(t.breadcrumbs[0],": ").concat(t.name)})):[Object(n.createElement)(D.a,R()({key:"attr-".concat(t.id)},e,{className:u.join(" "),isSelected:i===t.id,onSelect:this.onSelectAttribute,isSingle:!0,disabled:"0"===t.count,"aria-expanded":i===t.id,"aria-label":Object(o.sprintf)(Object(o._n)("%s, has %d term","%s, has %d terms",t.count,"woo-gutenberg-products-block"),t.name,t.count)})),i===t.id&&l&&Object(n.createElement)("div",{key:"loading",className:"woocommerce-search-list__item woocommerce-product-attributes__itemdepth-1 is-loading is-not-active"},Object(n.createElement)(k.Spinner,null))]}},{key:"render",value:function(){var e=this.state,t=e.attribute,r=e.list,c=e.loading,s=e.termsList,a=this.props,i=a.onChange,l=a.onOperatorChange,u=a.operator,d=a.selected,b=s[t]||[],p=[].concat(I()(r),I()(b)),m={clear:Object(o.__)("Clear all product attributes","woo-gutenberg-products-block"),list:Object(o.__)("Product Attributes","woo-gutenberg-products-block"),noItems:Object(o.__)("Your store doesn't have any product attributes.","woo-gutenberg-products-block"),search:Object(o.__)("Search for product attributes","woo-gutenberg-products-block"),selected:function(e){return Object(o.sprintf)(Object(o._n)("%d attribute selected","%d attributes selected",e,"woo-gutenberg-products-block"),e)},updated:Object(o.__)("Product attribute search results updated.","woo-gutenberg-products-block")};return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(B.a,{className:"woocommerce-product-attributes",list:p,isLoading:c,selected:d.map(function(e){var t=e.id;return Object(E.find)(p,{id:t})}).filter(Boolean),onChange:i,renderItem:this.renderItem,messages:m,isHierarchical:!0}),!!l&&Object(n.createElement)("div",{className:d.length<2?"screen-reader-text":""},Object(n.createElement)(k.SelectControl,{className:"woocommerce-product-attributes__operator",label:Object(o.__)("Display products matching","woo-gutenberg-products-block"),help:Object(o.__)("Pick at least two attributes to use this setting.","woo-gutenberg-products-block"),value:u,onChange:l,options:[{label:Object(o.__)("Any selected attributes","woo-gutenberg-products-block"),value:"any"},{label:Object(o.__)("All selected attributes","woo-gutenberg-products-block"),value:"all"}]})))}}]),t}(n.Component);q.propTypes={onChange:C.a.func.isRequired,onOperatorChange:C.a.func,operator:C.a.oneOf(["all","any"]),selected:C.a.array.isRequired},q.defaultProps={operator:"any"};var H=q,F=r(179),G=r(34),V=function(e){function t(){var e;return l()(this,t),(e=p()(this,h()(t).apply(this,arguments))).state={products:[],loaded:!1},e.debouncedGetProducts=Object(E.debounce)(e.getProducts.bind(_()(_()(e))),200),e}return j()(t,e),d()(t,[{key:"componentDidMount",value:function(){this.props.attributes.attributes&&this.getProducts()}},{key:"componentDidUpdate",value:function(e){var t=this;["attributes","attrOperator","columns","orderby","rows"].reduce(function(r,n){return r||e.attributes[n]!==t.props.attributes[n]},!1)&&this.debouncedGetProducts()}},{key:"getProducts",value:function(){var e=this,t=this.props.attributes;t.attributes.length?O()({path:Object(v.addQueryArgs)("/wc-pb/v3/products",Object(x.a)(t,this.props.name))}).then(function(t){e.setState({products:t,loaded:!0})}).catch(function(){e.setState({products:[],loaded:!0})}):this.setState({products:[],loaded:!0})}},{key:"getInspectorControls",value:function(){var e=this.props.setAttributes,t=this.props.attributes,r=t.attributes,c=t.attrOperator,s=t.columns,a=t.orderby,i=t.rows;return Object(n.createElement)(y.InspectorControls,{key:"inspector"},Object(n.createElement)(k.PanelBody,{title:Object(o.__)("Layout","woo-gutenberg-products-block"),initialOpen:!0},Object(n.createElement)(N.a,{columns:s,rows:i,setAttributes:e})),Object(n.createElement)(k.PanelBody,{title:Object(o.__)("Filter by Product Attribute","woo-gutenberg-products-block"),initialOpen:!1},Object(n.createElement)(H,{selected:r,onChange:function(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return{id:e.id,attr_slug:e.attr_slug}});e({attributes:t})},operator:c,onOperatorChange:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return e({attrOperator:t})}})),Object(n.createElement)(k.PanelBody,{title:Object(o.__)("Order By","woo-gutenberg-products-block"),initialOpen:!1},Object(n.createElement)(F.a,{setAttributes:e,value:a})))}},{key:"renderEditMode",value:function(){var e=this.props,t=e.debouncedSpeak,r=e.setAttributes,c=this.props.attributes;return Object(n.createElement)(k.Placeholder,{icon:Object(n.createElement)(s.a,{icon:"custom-post-type"}),label:Object(o.__)("Products by Attribute","woo-gutenberg-products-block"),className:"wc-block-products-grid wc-block-products-attribute"},Object(o.__)("Display a grid of products from your selected attributes.","woo-gutenberg-products-block"),Object(n.createElement)("div",{className:"wc-block-products-attribute__selection"},Object(n.createElement)(H,{selected:c.attributes,onChange:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e){return{id:e.id,attr_slug:e.attr_slug}});r({attributes:e})},operator:c.attrOperator,onOperatorChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"any";return r({attrOperator:e})}}),Object(n.createElement)(k.Button,{isDefault:!0,onClick:function(){r({editMode:!1}),t(Object(o.__)("Showing Products by Attribute block preview.","woo-gutenberg-products-block"))}},Object(o.__)("Done","woo-gutenberg-products-block"))))}},{key:"render",value:function(){var e=this.props.setAttributes,t=this.props.attributes,r=t.columns,c=t.editMode,a=this.state,i=a.loaded,l=a.products,u=["wc-block-products-grid","wc-block-products-attribute"];return r&&u.push("cols-".concat(r)),l&&!l.length&&(i?u.push("is-not-found"):u.push("is-loading")),Object(n.createElement)(n.Fragment,null,Object(n.createElement)(y.BlockControls,null,Object(n.createElement)(k.Toolbar,{controls:[{icon:"edit",title:Object(o.__)("Edit"),onClick:function(){return e({editMode:!c})},isActive:c}]})),this.getInspectorControls(),c?this.renderEditMode():Object(n.createElement)("div",{className:u.join(" ")},l.length?l.map(function(e){return Object(n.createElement)(G.a,{product:e,key:e.id})}):Object(n.createElement)(k.Placeholder,{icon:Object(n.createElement)(s.a,{icon:"custom-post-type"}),label:Object(o.__)("Products by Attribute","woo-gutenberg-products-block")},i?Object(o.__)("No products found.","woo-gutenberg-products-block"):Object(n.createElement)(k.Spinner,null))))}}]),t}(n.Component);V.propTypes={attributes:C.a.object.isRequired,name:C.a.string.isRequired,setAttributes:C.a.func.isRequired,debouncedSpeak:C.a.func.isRequired};var U=Object(k.withSpokenMessages)(V),Q=r(35);Object(a.registerBlockType)("woocommerce/products-by-attribute",{title:Object(o.__)("Products by Attribute","woo-gutenberg-products-block"),icon:Object(n.createElement)(s.a,{icon:"custom-post-type"}),category:"woocommerce",keywords:[Object(o.__)("WooCommerce","woo-gutenberg-products-block")],description:Object(o.__)("Display a grid of products from your selected attributes.","woo-gutenberg-products-block"),supports:{align:["wide","full"]},attributes:{attributes:{type:"array",default:[]},attrOperator:{type:"string",default:"any"},columns:{type:"number",default:wc_product_block_data.default_columns},editMode:{type:"boolean",default:!0},orderby:{type:"string",default:"date"},rows:{type:"number",default:wc_product_block_data.default_rows}},edit:function(e){return Object(n.createElement)(U,e)},save:function(e){var t=e.attributes.align;return Object(n.createElement)(n.RawHTML,{className:t?"align".concat(t):""},Object(Q.a)(e,"woocommerce/products-by-attribute"))}})}}));